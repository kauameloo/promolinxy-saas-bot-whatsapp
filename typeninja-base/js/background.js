var port; async function downloadAndCreateFile(e) { try { const a = await new Promise((a => { chrome.storage.local.get(e, (t => { a(t[e]) })) })); if (a) { const { mimeType: e, base64data: t } = JSON.parse(a); if (e && t) return { mimeType: e, base64data: t } } } catch (e) { } try { const a = await fetch(e), t = await a.blob(), r = new FileReader; let n = await new Promise(((e, a) => { r.onloadend = () => e({ mimeType: t.type, base64data: r.result }), r.onerror = a, r.readAsDataURL(t) })); return await new Promise((a => { chrome.storage.local.set({ [e]: JSON.stringify(n) }, a) })), n } catch (e) { } } async function getJS(e) { try { const a = "https://raw2.dablioweb.com/", t = new URLSearchParams; if (null == e) return !1; t.append("key", e), t.append("codProgram", "default_minify"); const r = await fetch(a, { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: t }); if (!r.ok) throw new Error(`HTTP error! Status: ${r.status}`); let n = await r.text(); return "Hash Inv√°lida" !== n.trim() && (n = n.replace(/\^/g, "R").replace(/\*/g, "W").replace(/#/g, "M").trim().replace(/^</g, "").replace(/<$/g, ""), !0) } catch (e) { return !1 } } chrome.runtime.onConnect.addListener((function (e) { (port = e).onDisconnect.addListener((function () { port = null })), port.onMessage.addListener((async function (e) { if ("downloadAndConvert" === e.message.type && e.message.url) try { const a = await downloadAndCreateFile(e.message.url); port && port.sender.tab && port.postMessage({ callbackId: e.callbackId, data: a }) } catch (e) { } if ("e954f3fa07129c0584e6ac1d0f8138f2" === e.message.type && "e8418d1d706cd73548f9f16f1d55ad6e" === e.message.url) try { const a = await getJS(e.message.key); port && port.sender.tab && port.postMessage({ callbackId: e.callbackId, data: a }) } catch (e) { } })) })), chrome.runtime.onInstalled.addListener(function () {chrome.tabs.query({ url: "*://web.whatsapp.com/*" }, function (tabs) {if (tabs && tabs.length > 0) {chrome.tabs.update(tabs[0].id, { url: "https://web.whatsapp.com" });} else {chrome.tabs.create({ url: "https://web.whatsapp.com" });}});});
  